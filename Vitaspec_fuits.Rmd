---
title: "Vitaspec_fuits"
output: html_document
date: "2024-09-23"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


# Load data
```{r}
library(nirsextra)
library(rnirs)
d="/media/ecarnot/797E-F059/VitaSPEC/"
sp=sp2df(asd_read_dir(paste0(d,"20240325_Vitaspec_Pobe/")))
sp$ech=sub("-[^-]*$", "", rownames(sp))
ref=read.table(paste0(d,"Donn√©es_pour_NIRS_TEmeso.csv"), sep=";",header=TRUE, dec = ".")
ref$ech=paste0(ref$Identifiant,"-",ref$Code.arbre)
colnames(ref)[colnames(ref) == "TE1...MF."] = "Eau"
sp=merge(sp, ref,by="ech")
```

```{r}


res=vitaspec_preCV(sp$x,sp$Eau,list_pre,15) 

mse(fm, ~ ncomp)



```

